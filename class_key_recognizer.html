<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Entropy Piano Tuner: KeyRecognizer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Entropy Piano Tuner<span id="projectnumber">&#160;1.1.2  (documentation not yet complete)</span>
   </div>
   <div id="projectbrief">An open-source experimental software for piano tuning by entropy minimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_key_recognizer.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_key_recognizer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">KeyRecognizer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Module for fast recognition of the pressed key.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for KeyRecognizer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer__inherit__graph.png" border="0" usemap="#a_key_recognizer_inherit__map" alt="Inheritance graph"/></div>
<map name="a_key_recognizer_inherit__map" id="a_key_recognizer_inherit__map">
<area shape="rect" title="Module for fast recognition of the pressed key." alt="" coords="27,79,146,104"/>
<area shape="rect" href="class_simple_thread_handler.html" title="Simple thread handler." alt="" coords="5,5,168,31"/>
<area shape="poly" title=" " alt="" coords="89,44,89,79,84,79,84,44"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for KeyRecognizer:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer__coll__graph.png" border="0" usemap="#a_key_recognizer_coll__map" alt="Collaboration graph"/></div>
<map name="a_key_recognizer_coll__map" id="a_key_recognizer_coll__map">
<area shape="rect" title="Module for fast recognition of the pressed key." alt="" coords="282,181,401,207"/>
<area shape="rect" href="class_simple_thread_handler.html" title="Simple thread handler." alt="" coords="5,93,168,119"/>
<area shape="poly" title=" " alt="" coords="135,121,308,179,306,184,133,126"/>
<area shape="rect" href="class_key_recognizer_callback.html" title="Callback class for KeyRecognizer." alt="" coords="193,93,367,119"/>
<area shape="poly" title=" " alt="" coords="290,131,302,156,326,179,322,183,298,159,285,133"/>
<area shape="rect" href="class_piano.html" title=" " alt="" coords="392,93,451,119"/>
<area shape="poly" title=" " alt="" coords="403,131,354,183,351,179,399,127"/>
<area shape="rect" href="class_keyboard.html" title="Class describing the piano keyboard, holding a collection of keys." alt="" coords="235,5,317,31"/>
<area shape="poly" title=" " alt="" coords="300,38,339,67,393,92,391,97,336,72,296,42"/>
<area shape="rect" href="class_algorithm_parameters.html" title=" " alt="" coords="341,5,501,31"/>
<area shape="poly" title=" " alt="" coords="424,45,424,93,419,93,419,45"/>
<area shape="rect" href="class_f_f_t___implementation.html" title="Thread&#45;safe implementation of fftw3." alt="" coords="498,93,654,119"/>
<area shape="poly" title=" " alt="" coords="535,126,446,160,377,184,375,179,444,155,534,121"/>
<area shape="rect" href="class_f_f_t_adapter.html" title="Abstract base class for handling fast Fourier transforms." alt="" coords="550,5,645,31"/>
<area shape="poly" title=" " alt="" coords="594,45,582,93,576,92,589,43"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afe04d01a5fa44b7f6b93cc847b7d422d" id="r_afe04d01a5fa44b7f6b93cc847b7d422d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe04d01a5fa44b7f6b93cc847b7d422d">KeyRecognizer</a> (<a class="el" href="class_key_recognizer_callback.html">KeyRecognizerCallback</a> *callback)</td></tr>
<tr class="memdesc:afe04d01a5fa44b7f6b93cc847b7d422d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of the <a class="el" href="class_key_recognizer.html" title="Module for fast recognition of the pressed key.">KeyRecognizer</a>.  <br /></td></tr>
<tr class="separator:afe04d01a5fa44b7f6b93cc847b7d422d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e8da27479d767af6868a0e859738b4" id="r_a34e8da27479d767af6868a0e859738b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34e8da27479d767af6868a0e859738b4">~KeyRecognizer</a> ()</td></tr>
<tr class="separator:a34e8da27479d767af6868a0e859738b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5be96a5697d134e9732bb229eb181d" id="r_ace5be96a5697d134e9732bb229eb181d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace5be96a5697d134e9732bb229eb181d">init</a> (bool optimize)</td></tr>
<tr class="memdesc:ace5be96a5697d134e9732bb229eb181d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the <a class="el" href="class_key_recognizer.html" title="Module for fast recognition of the pressed key.">KeyRecognizer</a>.  <br /></td></tr>
<tr class="separator:ace5be96a5697d134e9732bb229eb181d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64fbe75ad6c9205d1fbafaf6067ff4e8" id="r_a64fbe75ad6c9205d1fbafaf6067ff4e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64fbe75ad6c9205d1fbafaf6067ff4e8">recognizeKey</a> (bool forceRestart, const <a class="el" href="class_piano.html">Piano</a> *piano, <a class="el" href="fftadapter_8h.html#a594980415f64f924a9cf17fddb9a26cf">FFTDataPointer</a> fftPointer, int selectedKey, bool keyForced)</td></tr>
<tr class="memdesc:a64fbe75ad6c9205d1fbafaf6067ff4e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start key recognition.  <br /></td></tr>
<tr class="separator:a64fbe75ad6c9205d1fbafaf6067ff4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_simple_thread_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_class_simple_thread_handler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_simple_thread_handler.html">SimpleThreadHandler</a></td></tr>
<tr class="memitem:adf03b5bcd756890c4af918cca4a3ae4c inherit pub_methods_class_simple_thread_handler" id="r_adf03b5bcd756890c4af918cca4a3ae4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#adf03b5bcd756890c4af918cca4a3ae4c">SimpleThreadHandler</a> ()</td></tr>
<tr class="separator:adf03b5bcd756890c4af918cca4a3ae4c inherit pub_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade953295b93ef40e110fb82e0f2a84c7 inherit pub_methods_class_simple_thread_handler" id="r_ade953295b93ef40e110fb82e0f2a84c7"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#ade953295b93ef40e110fb82e0f2a84c7">~SimpleThreadHandler</a> ()</td></tr>
<tr class="memdesc:ade953295b93ef40e110fb82e0f2a84c7 inherit pub_methods_class_simple_thread_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor waits for the current thread to stop if it is running.  <br /></td></tr>
<tr class="separator:ade953295b93ef40e110fb82e0f2a84c7 inherit pub_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd459deb405647c580000490aaa71a0d inherit pub_methods_class_simple_thread_handler" id="r_acd459deb405647c580000490aaa71a0d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#acd459deb405647c580000490aaa71a0d">start</a> ()</td></tr>
<tr class="separator:acd459deb405647c580000490aaa71a0d inherit pub_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c7f6061a6b567b59ca9847180544d70 inherit pub_methods_class_simple_thread_handler" id="r_a9c7f6061a6b567b59ca9847180544d70"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#a9c7f6061a6b567b59ca9847180544d70">stop</a> ()</td></tr>
<tr class="separator:a9c7f6061a6b567b59ca9847180544d70 inherit pub_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8eb84f9562650da30230fb42fee17ac6" id="r_a8eb84f9562650da30230fb42fee17ac6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8eb84f9562650da30230fb42fee17ac6">workerFunction</a> () override final</td></tr>
<tr class="memdesc:a8eb84f9562650da30230fb42fee17ac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main worker function for executing the key recognition thread.  <br /></td></tr>
<tr class="separator:a8eb84f9562650da30230fb42fee17ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d4472824709f6613d09bb8dc77677e" id="r_a83d4472824709f6613d09bb8dc77677e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83d4472824709f6613d09bb8dc77677e">detectForcedFrequency</a> ()</td></tr>
<tr class="memdesc:a83d4472824709f6613d09bb8dc77677e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect forced key.  <br /></td></tr>
<tr class="separator:a83d4472824709f6613d09bb8dc77677e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be4d239b340713b5bf54457d89bd778" id="r_a4be4d239b340713b5bf54457d89bd778"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4be4d239b340713b5bf54457d89bd778">detectFrequencyInTreble</a> ()</td></tr>
<tr class="memdesc:a4be4d239b340713b5bf54457d89bd778"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect keys in the treble.  <br /></td></tr>
<tr class="separator:a4be4d239b340713b5bf54457d89bd778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d3eac12f6777469a48d2c98ddfb2ed6" id="r_a4d3eac12f6777469a48d2c98ddfb2ed6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d3eac12f6777469a48d2c98ddfb2ed6">constructLogSpec</a> ()</td></tr>
<tr class="memdesc:a4d3eac12f6777469a48d2c98ddfb2ed6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct logarithmic spectrum.  <br /></td></tr>
<tr class="separator:a4d3eac12f6777469a48d2c98ddfb2ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc7380f691a2b83e93a6e84aa38a70e" id="r_adcc7380f691a2b83e93a6e84aa38a70e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adcc7380f691a2b83e93a6e84aa38a70e">signalPreprocessing</a> ()</td></tr>
<tr class="memdesc:adcc7380f691a2b83e93a6e84aa38a70e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preprocessing of the signal.  <br /></td></tr>
<tr class="separator:adcc7380f691a2b83e93a6e84aa38a70e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad051d7f6d70cf0960d317e2861598f43" id="r_ad051d7f6d70cf0960d317e2861598f43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad051d7f6d70cf0960d317e2861598f43">defineKernel</a> ()</td></tr>
<tr class="memdesc:ad051d7f6d70cf0960d317e2861598f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the kernel vector for key recognition.  <br /></td></tr>
<tr class="separator:ad051d7f6d70cf0960d317e2861598f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c010e16576e21b3c3b6b719d5e7f0fb" id="r_a0c010e16576e21b3c3b6b719d5e7f0fb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c010e16576e21b3c3b6b719d5e7f0fb">estimateFrequency</a> ()</td></tr>
<tr class="memdesc:a0c010e16576e21b3c3b6b719d5e7f0fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate frequency for a given log-log spectrum.  <br /></td></tr>
<tr class="separator:a0c010e16576e21b3c3b6b719d5e7f0fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0eba901db51587986d4b3d255135464" id="r_af0eba901db51587986d4b3d255135464"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0eba901db51587986d4b3d255135464">findNearestKey</a> (double f)</td></tr>
<tr class="memdesc:af0eba901db51587986d4b3d255135464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the nearest key for a given frequency.  <br /></td></tr>
<tr class="separator:af0eba901db51587986d4b3d255135464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3faff2c2ae9f9cc81aca216f1345b772" id="r_a3faff2c2ae9f9cc81aca216f1345b772"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3faff2c2ae9f9cc81aca216f1345b772">mtof</a> (int m)</td></tr>
<tr class="memdesc:a3faff2c2ae9f9cc81aca216f1345b772"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map bin index to frequency.  <br /></td></tr>
<tr class="separator:a3faff2c2ae9f9cc81aca216f1345b772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee5d8c5201a36164195ed9b6ddbfc1a0" id="r_aee5d8c5201a36164195ed9b6ddbfc1a0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee5d8c5201a36164195ed9b6ddbfc1a0">ftom</a> (double f)</td></tr>
<tr class="memdesc:aee5d8c5201a36164195ed9b6ddbfc1a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map frequency to bin index.  <br /></td></tr>
<tr class="separator:aee5d8c5201a36164195ed9b6ddbfc1a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d64a7e75360ee497f157bd817579920" id="r_a5d64a7e75360ee497f157bd817579920"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d64a7e75360ee497f157bd817579920">Write</a> (std::string filename, std::vector&lt; double &gt; &amp;v, bool log=true)</td></tr>
<tr class="separator:a5d64a7e75360ee497f157bd817579920"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:afda7253ad5388e824a3c94e0e981ed41" id="r_afda7253ad5388e824a3c94e0e981ed41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_key_recognizer_callback.html">KeyRecognizerCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afda7253ad5388e824a3c94e0e981ed41">mCallback</a></td></tr>
<tr class="memdesc:afda7253ad5388e824a3c94e0e981ed41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the caller.  <br /></td></tr>
<tr class="separator:afda7253ad5388e824a3c94e0e981ed41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac57b2c7313010aed2a36ee9bdfa4c6fe" id="r_ac57b2c7313010aed2a36ee9bdfa4c6fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fftadapter_8h.html#a594980415f64f924a9cf17fddb9a26cf">FFTDataPointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac57b2c7313010aed2a36ee9bdfa4c6fe">mFFTPtr</a></td></tr>
<tr class="memdesc:ac57b2c7313010aed2a36ee9bdfa4c6fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to Fourier transform.  <br /></td></tr>
<tr class="separator:ac57b2c7313010aed2a36ee9bdfa4c6fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36489a01dabbbb046253ed353b4b44d1" id="r_a36489a01dabbbb046253ed353b4b44d1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36489a01dabbbb046253ed353b4b44d1">mConcertPitch</a></td></tr>
<tr class="memdesc:a36489a01dabbbb046253ed353b4b44d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual frequency of the A-key.  <br /></td></tr>
<tr class="separator:a36489a01dabbbb046253ed353b4b44d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321cebc408f13caad794284ccf2fd56e" id="r_a321cebc408f13caad794284ccf2fd56e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_piano.html">Piano</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a321cebc408f13caad794284ccf2fd56e">mPiano</a></td></tr>
<tr class="memdesc:a321cebc408f13caad794284ccf2fd56e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the piano data.  <br /></td></tr>
<tr class="separator:a321cebc408f13caad794284ccf2fd56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b3f2f061b9638d84f51f587a989523" id="r_a68b3f2f061b9638d84f51f587a989523"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68b3f2f061b9638d84f51f587a989523">mNumberOfKeys</a></td></tr>
<tr class="memdesc:a68b3f2f061b9638d84f51f587a989523"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of piano keys.  <br /></td></tr>
<tr class="separator:a68b3f2f061b9638d84f51f587a989523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435a974bad2aed884572ce63a914a3d1" id="r_a435a974bad2aed884572ce63a914a3d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a435a974bad2aed884572ce63a914a3d1">mKeyNumberOfA</a></td></tr>
<tr class="memdesc:a435a974bad2aed884572ce63a914a3d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the A-key.  <br /></td></tr>
<tr class="separator:a435a974bad2aed884572ce63a914a3d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18888e2ecd2d97b1d13eaed283d69bfe" id="r_a18888e2ecd2d97b1d13eaed283d69bfe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_f_t___implementation.html">FFT_Implementation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18888e2ecd2d97b1d13eaed283d69bfe">mFFT</a></td></tr>
<tr class="memdesc:a18888e2ecd2d97b1d13eaed283d69bfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance of FFT implementation.  <br /></td></tr>
<tr class="separator:a18888e2ecd2d97b1d13eaed283d69bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2006e4b41de73553e53f59f94faafdbc" id="r_a2006e4b41de73553e53f59f94faafdbc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2006e4b41de73553e53f59f94faafdbc">mLogSpec</a></td></tr>
<tr class="memdesc:a2006e4b41de73553e53f59f94faafdbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logarithmic spectrum (LogSpec)  <br /></td></tr>
<tr class="separator:a2006e4b41de73553e53f59f94faafdbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0078ef34c47a238c687877cf3be6af5" id="r_ae0078ef34c47a238c687877cf3be6af5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0078ef34c47a238c687877cf3be6af5">mFlatSpectrum</a></td></tr>
<tr class="memdesc:ae0078ef34c47a238c687877cf3be6af5"><td class="mdescLeft">&#160;</td><td class="mdescRight">DoubleLogarithmic spectrum (LogLogSpec)  <br /></td></tr>
<tr class="separator:ae0078ef34c47a238c687877cf3be6af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff558209e0f528fa9f08b6579134f90f" id="r_aff558209e0f528fa9f08b6579134f90f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fftadapter_8h.html#a2a94d0acf35b74fab627df026f02daf4">FFTComplexVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff558209e0f528fa9f08b6579134f90f">mKernelFFT</a></td></tr>
<tr class="memdesc:aff558209e0f528fa9f08b6579134f90f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fourier transform of the kernel.  <br /></td></tr>
<tr class="separator:aff558209e0f528fa9f08b6579134f90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62d40c584410834ffc8d19b98c71589a" id="r_a62d40c584410834ffc8d19b98c71589a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fftadapter_8h.html#a2a94d0acf35b74fab627df026f02daf4">FFTComplexVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62d40c584410834ffc8d19b98c71589a">mFlatFFT</a></td></tr>
<tr class="memdesc:a62d40c584410834ffc8d19b98c71589a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fourier transform of LogLogSpec.  <br /></td></tr>
<tr class="separator:a62d40c584410834ffc8d19b98c71589a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af179974811d35ecce1c818fc371d084a" id="r_af179974811d35ecce1c818fc371d084a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fftadapter_8h.html#aa6e69f745dd8b48e58e43fe16e08faf4">FFTRealVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af179974811d35ecce1c818fc371d084a">mConvolution</a></td></tr>
<tr class="memdesc:af179974811d35ecce1c818fc371d084a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convolution vector.  <br /></td></tr>
<tr class="separator:af179974811d35ecce1c818fc371d084a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8498e6102fa0225801cc56274ced9f3" id="r_ae8498e6102fa0225801cc56274ced9f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8498e6102fa0225801cc56274ced9f3">mSelectedKey</a></td></tr>
<tr class="memdesc:ae8498e6102fa0225801cc56274ced9f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of the actually selected key.  <br /></td></tr>
<tr class="separator:ae8498e6102fa0225801cc56274ced9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f9e3b3e5f7447e58b5b24e60bf65486" id="r_a4f9e3b3e5f7447e58b5b24e60bf65486"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f9e3b3e5f7447e58b5b24e60bf65486">mKeyForced</a></td></tr>
<tr class="memdesc:a4f9e3b3e5f7447e58b5b24e60bf65486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating that the key is forced.  <br /></td></tr>
<tr class="separator:a4f9e3b3e5f7447e58b5b24e60bf65486"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:afaa8624e0ee7ca7ca9d00602d85ba428" id="r_afaa8624e0ee7ca7ca9d00602d85ba428"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afaa8624e0ee7ca7ca9d00602d85ba428">M</a> = 1024</td></tr>
<tr class="memdesc:afaa8624e0ee7ca7ca9d00602d85ba428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bins (powers of 2,3,5)  <br /></td></tr>
<tr class="separator:afaa8624e0ee7ca7ca9d00602d85ba428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18644f7aecec4213489222c015fef905" id="r_a18644f7aecec4213489222c015fef905"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18644f7aecec4213489222c015fef905">fmin</a> = 20</td></tr>
<tr class="memdesc:a18644f7aecec4213489222c015fef905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequency of bin 0.  <br /></td></tr>
<tr class="separator:a18644f7aecec4213489222c015fef905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaebe5ecf81c4d19237a9f0b77401d13" id="r_aeaebe5ecf81c4d19237a9f0b77401d13"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeaebe5ecf81c4d19237a9f0b77401d13">fmax</a> = 10000</td></tr>
<tr class="memdesc:aeaebe5ecf81c4d19237a9f0b77401d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequency of bin M-1.  <br /></td></tr>
<tr class="separator:aeaebe5ecf81c4d19237a9f0b77401d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a4cafaccbebbeac3ea1d648fc39396" id="r_aa6a4cafaccbebbeac3ea1d648fc39396"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6a4cafaccbebbeac3ea1d648fc39396">logfmin</a> = log(<a class="el" href="#a18644f7aecec4213489222c015fef905">fmin</a>)</td></tr>
<tr class="memdesc:aa6a4cafaccbebbeac3ea1d648fc39396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log of minimal frequency.  <br /></td></tr>
<tr class="separator:aa6a4cafaccbebbeac3ea1d648fc39396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63af605a2fa3b4252b091cfc2fb01a8e" id="r_a63af605a2fa3b4252b091cfc2fb01a8e"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a63af605a2fa3b4252b091cfc2fb01a8e">logfmax</a> = log(<a class="el" href="#aeaebe5ecf81c4d19237a9f0b77401d13">fmax</a>)</td></tr>
<tr class="memdesc:a63af605a2fa3b4252b091cfc2fb01a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log of maximal frequency.  <br /></td></tr>
<tr class="separator:a63af605a2fa3b4252b091cfc2fb01a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_class_simple_thread_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_static_methods_class_simple_thread_handler')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="class_simple_thread_handler.html">SimpleThreadHandler</a></td></tr>
<tr class="memitem:a2b9a9567f74a046f9a76ff974ca3fa5e inherit pub_static_methods_class_simple_thread_handler" id="r_a2b9a9567f74a046f9a76ff974ca3fa5e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#a2b9a9567f74a046f9a76ff974ca3fa5e">setThreadName</a> (std::string s)</td></tr>
<tr class="separator:a2b9a9567f74a046f9a76ff974ca3fa5e inherit pub_static_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_simple_thread_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_methods_class_simple_thread_handler')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_simple_thread_handler.html">SimpleThreadHandler</a></td></tr>
<tr class="memitem:a773070afe77138730078e87096784f1b inherit pro_methods_class_simple_thread_handler" id="r_a773070afe77138730078e87096784f1b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#a773070afe77138730078e87096784f1b">exceptionCaught</a> (const <a class="el" href="class_ept_exception.html">EptException</a> &amp;e)</td></tr>
<tr class="separator:a773070afe77138730078e87096784f1b inherit pro_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3190fa086d45d5325bbffabf0be5097 inherit pro_methods_class_simple_thread_handler" id="r_ae3190fa086d45d5325bbffabf0be5097"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#ae3190fa086d45d5325bbffabf0be5097">setCancelThread</a> (bool b)</td></tr>
<tr class="memdesc:ae3190fa086d45d5325bbffabf0be5097 inherit pro_methods_class_simple_thread_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a thread for termination.  <br /></td></tr>
<tr class="separator:ae3190fa086d45d5325bbffabf0be5097 inherit pro_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a717c9c2053e0b6c38a75acc619132b9c inherit pro_methods_class_simple_thread_handler" id="r_a717c9c2053e0b6c38a75acc619132b9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#a717c9c2053e0b6c38a75acc619132b9c">cancelThread</a> () const</td></tr>
<tr class="memdesc:a717c9c2053e0b6c38a75acc619132b9c inherit pro_methods_class_simple_thread_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out whether a thread has been registered for termination.  <br /></td></tr>
<tr class="separator:a717c9c2053e0b6c38a75acc619132b9c inherit pro_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e798c941ef6b6cc223c155334c59542 inherit pro_methods_class_simple_thread_handler" id="r_a1e798c941ef6b6cc223c155334c59542"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#a1e798c941ef6b6cc223c155334c59542">msleep</a> (double milliseconds)</td></tr>
<tr class="separator:a1e798c941ef6b6cc223c155334c59542 inherit pro_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa264337db95c2348e4396ccbce713ff8 inherit pro_methods_class_simple_thread_handler" id="r_aa264337db95c2348e4396ccbce713ff8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_thread_handler.html#aa264337db95c2348e4396ccbce713ff8">isThreadRunning</a> () const</td></tr>
<tr class="separator:aa264337db95c2348e4396ccbce713ff8 inherit pro_methods_class_simple_thread_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Module for fast recognition of the pressed key. </p>
<p>When a key is pressed, the <a class="el" href="class_signal_analyzer.html" title="Signal analyzer: Fourier transformation of the recorded audio signal.">SignalAnalyzer</a> calls the function recognizeKey to start an independent thread for key recognition on the basis of the current Fourier transform. The key recognizer transmits the estimated frequency and the corresponding key number via a callback function. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00058">58</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afe04d01a5fa44b7f6b93cc847b7d422d" name="afe04d01a5fa44b7f6b93cc847b7d422d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe04d01a5fa44b7f6b93cc847b7d422d">&#9670;&#160;</a></span>KeyRecognizer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KeyRecognizer::KeyRecognizer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_key_recognizer_callback.html">KeyRecognizerCallback</a> *</td>          <td class="paramname"><span class="paramname"><em>callback</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor of the <a class="el" href="class_key_recognizer.html" title="Module for fast recognition of the pressed key.">KeyRecognizer</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>: Pointer to the instance of the callback. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00052">52</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>

</div>
</div>
<a id="a34e8da27479d767af6868a0e859738b4" name="a34e8da27479d767af6868a0e859738b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34e8da27479d767af6868a0e859738b4">&#9670;&#160;</a></span>~KeyRecognizer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KeyRecognizer::~KeyRecognizer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00067">67</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4d3eac12f6777469a48d2c98ddfb2ed6" name="a4d3eac12f6777469a48d2c98ddfb2ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d3eac12f6777469a48d2c98ddfb2ed6">&#9670;&#160;</a></span>constructLogSpec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::constructLogSpec </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct logarithmic spectrum. </p>
<p>This function maps the FFT spectrum, which is linear in the frequency, to a logarithmically binned spectrum. To this end the amplitudes of the FFT power spectrum are evently distributed into bins of the logarithmic spectrum (mLogSpec). </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00307">307</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a4d3eac12f6777469a48d2c98ddfb2ed6_cgraph.png" border="0" usemap="#aclass_key_recognizer_a4d3eac12f6777469a48d2c98ddfb2ed6_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a4d3eac12f6777469a48d2c98ddfb2ed6_cgraph" id="aclass_key_recognizer_a4d3eac12f6777469a48d2c98ddfb2ed6_cgraph">
<area shape="rect" title="Construct logarithmic spectrum." alt="" coords="5,5,192,45"/>
<area shape="rect" href="namespace_math_tools.html#a1fe78450a9646eab1fd4e9400cf79be8" title=" " alt="" coords="240,13,476,38"/>
<area shape="poly" title=" " alt="" coords="192,23,226,23,226,28,192,28"/>
<area shape="rect" href="namespace_math_tools.html#a7c9a732488d87f78d2b0cc78f3e047f5" title="Round a floating point number to an integer." alt="" coords="524,13,717,38"/>
<area shape="poly" title=" " alt="" coords="476,23,510,23,510,28,476,28"/>
</map>
</div>

</div>
</div>
<a id="ad051d7f6d70cf0960d317e2861598f43" name="ad051d7f6d70cf0960d317e2861598f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad051d7f6d70cf0960d317e2861598f43">&#9670;&#160;</a></span>defineKernel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::defineKernel </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Define the kernel vector for key recognition. </p>
<p>The tuner needs to recognize the key that is pressed. The essential part in the recognition procedure is a kernel function which is convolved linearly with the actually measured spectrum. It has positive peaks in those positions where partials are expected and negative peaks in the place of wrong partials. It is stored in a in a STL map. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00391">391</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_ad051d7f6d70cf0960d317e2861598f43_cgraph.png" border="0" usemap="#aclass_key_recognizer_ad051d7f6d70cf0960d317e2861598f43_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_ad051d7f6d70cf0960d317e2861598f43_cgraph" id="aclass_key_recognizer_ad051d7f6d70cf0960d317e2861598f43_cgraph">
<area shape="rect" title="Define the kernel vector for key recognition." alt="" coords="5,70,212,95"/>
<area shape="rect" href="class_f_f_t___implementation.html#abedd9b477e9f25722566a753d4eaaeed" title="Foward FFT, mapping a real vector with size N to a complex one with size N/2+1." alt="" coords="263,5,419,45"/>
<area shape="poly" title=" " alt="" coords="160,67,249,45,250,50,162,73"/>
<area shape="rect" href="class_key_recognizer.html#aee5d8c5201a36164195ed9b6ddbfc1a0" title="Map frequency to bin index." alt="" coords="263,70,419,95"/>
<area shape="poly" title=" " alt="" coords="212,80,249,80,249,85,212,85"/>
<area shape="rect" href="class_key_recognizer.html#a5d64a7e75360ee497f157bd817579920" title=" " alt="" coords="260,119,421,145"/>
<area shape="poly" title=" " alt="" coords="170,93,267,114,266,119,168,98"/>
<area shape="rect" href="class_f_f_t___implementation.html#ae3cd5e779f634462731886c16886a27d" title="Construct a new plan for the FFT transformation if necessary." alt="" coords="470,5,626,45"/>
<area shape="poly" title=" " alt="" coords="419,23,456,23,456,28,419,28"/>
<area shape="rect" href="class_key_recognizer.html#a3faff2c2ae9f9cc81aca216f1345b772" title="Map bin index to frequency." alt="" coords="469,119,627,145"/>
<area shape="poly" title=" " alt="" coords="422,129,456,129,456,135,422,135"/>
</map>
</div>

</div>
</div>
<a id="a83d4472824709f6613d09bb8dc77677e" name="a83d4472824709f6613d09bb8dc77677e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d4472824709f6613d09bb8dc77677e">&#9670;&#160;</a></span>detectForcedFrequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double KeyRecognizer::detectForcedFrequency </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detect forced key. </p>
<p>If a key is forced we search for the maximum of the FFT in the vicinity of the forced key with a width of a bit less than a half tone. </p><dl class="section return"><dt>Returns</dt><dd>Frequency in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00188">188</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a83d4472824709f6613d09bb8dc77677e_cgraph.png" border="0" usemap="#aclass_key_recognizer_a83d4472824709f6613d09bb8dc77677e_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a83d4472824709f6613d09bb8dc77677e_cgraph" id="aclass_key_recognizer_a83d4472824709f6613d09bb8dc77677e_cgraph">
<area shape="rect" title="Detect forced key." alt="" coords="5,47,216,87"/>
<area shape="rect" href="class_piano.html#aae9866e7d27d8f35fc0524f57fbb5758" title="Function returning the equal temperament." alt="" coords="264,29,489,55"/>
<area shape="poly" title=" " alt="" coords="216,55,250,51,251,57,216,60"/>
<area shape="rect" href="namespace_math_tools.html#a7c9a732488d87f78d2b0cc78f3e047f5" title="Round a floating point number to an integer." alt="" coords="280,79,473,104"/>
<area shape="poly" title=" " alt="" coords="216,74,266,79,266,84,216,79"/>
<area shape="rect" href="class_keyboard.html#a6920a5de40fff9a2014f03f8a5bb6e14" title=" " alt="" coords="537,5,757,31"/>
<area shape="poly" title=" " alt="" coords="489,29,523,26,524,32,490,35"/>
<area shape="rect" href="class_keyboard.html#a49ed6c8f56a37881d49a3a16e01d1daa" title=" " alt="" coords="542,55,753,80"/>
<area shape="poly" title=" " alt="" coords="490,50,529,54,528,59,489,55"/>
</map>
</div>

</div>
</div>
<a id="a4be4d239b340713b5bf54457d89bd778" name="a4be4d239b340713b5bf54457d89bd778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be4d239b340713b5bf54457d89bd778">&#9670;&#160;</a></span>detectFrequencyInTreble()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double KeyRecognizer::detectFrequencyInTreble </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detect keys in the treble. </p>
<p>For very high notes the kernel method is not suitable. This function detects whether one of the very high keys has been hit. This is done by comparing the second and the first moment of the FFT. If the ratio is above the threshold, indicating a high key, the frequency is determined simply by searching for the maximal peak in the range from 1..5 kHz. </p><dl class="section return"><dt>Returns</dt><dd>Frequency in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00224">224</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a4be4d239b340713b5bf54457d89bd778_cgraph.png" border="0" usemap="#aclass_key_recognizer_a4be4d239b340713b5bf54457d89bd778_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a4be4d239b340713b5bf54457d89bd778_cgraph" id="aclass_key_recognizer_a4be4d239b340713b5bf54457d89bd778_cgraph">
<area shape="rect" title="Detect keys in the treble." alt="" coords="5,5,240,45"/>
<area shape="rect" href="namespace_math_tools.html#a7c9a732488d87f78d2b0cc78f3e047f5" title="Round a floating point number to an integer." alt="" coords="288,13,481,38"/>
<area shape="poly" title=" " alt="" coords="240,23,274,23,274,28,240,28"/>
</map>
</div>

</div>
</div>
<a id="a0c010e16576e21b3c3b6b719d5e7f0fb" name="a0c010e16576e21b3c3b6b719d5e7f0fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c010e16576e21b3c3b6b719d5e7f0fb">&#9670;&#160;</a></span>estimateFrequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double KeyRecognizer::estimateFrequency </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate frequency for a given log-log spectrum. </p>
<p>This function estimates the frequency of a pressed piano key. To this end the logarithmically binned log spectrum is convolved with the recognition kernel for all frequencies. For speedup this convolution product is carried out by two Fourier transformations (in log space instead of real space) with an ordinary multiplication in between. The m-value (slot) where the response of the kernel is maximal is then used as a first estimate of the frequency. </p><dl class="section return"><dt>Returns</dt><dd>Estimated frequency in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00446">446</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a0c010e16576e21b3c3b6b719d5e7f0fb_cgraph.png" border="0" usemap="#aclass_key_recognizer_a0c010e16576e21b3c3b6b719d5e7f0fb_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a0c010e16576e21b3c3b6b719d5e7f0fb_cgraph" id="aclass_key_recognizer_a0c010e16576e21b3c3b6b719d5e7f0fb_cgraph">
<area shape="rect" title="Estimate frequency for a given log&#45;log spectrum." alt="" coords="5,95,256,121"/>
<area shape="rect" href="class_f_f_t___implementation.html#abedd9b477e9f25722566a753d4eaaeed" title="Foward FFT, mapping a real vector with size N to a complex one with size N/2+1." alt="" coords="319,5,475,45"/>
<area shape="poly" title=" " alt="" coords="172,93,318,47,319,52,173,98"/>
<area shape="rect" href="namespace_math_tools.html#a245ada2fb161d9992f7a139bbc6f9364" title="Find the component where the vector has its maximum." alt="" coords="304,70,491,95"/>
<area shape="poly" title=" " alt="" coords="256,93,290,90,291,95,257,99"/>
<area shape="rect" href="class_key_recognizer.html#a3faff2c2ae9f9cc81aca216f1345b772" title="Map bin index to frequency." alt="" coords="539,146,696,171"/>
<area shape="poly" title=" " alt="" coords="254,118,525,146,525,152,253,123"/>
<area shape="rect" href="class_key_recognizer.html#a5d64a7e75360ee497f157bd817579920" title=" " alt="" coords="317,171,478,197"/>
<area shape="poly" title=" " alt="" coords="177,118,339,165,338,170,175,123"/>
<area shape="rect" href="class_f_f_t___implementation.html#ae3cd5e779f634462731886c16886a27d" title="Construct a new plan for the FFT transformation if necessary." alt="" coords="539,5,695,45"/>
<area shape="poly" title=" " alt="" coords="476,23,525,23,525,28,476,28"/>
<area shape="poly" title=" " alt="" coords="478,172,525,167,525,172,479,177"/>
</map>
</div>

</div>
</div>
<a id="af0eba901db51587986d4b3d255135464" name="af0eba901db51587986d4b3d255135464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0eba901db51587986d4b3d255135464">&#9670;&#160;</a></span>findNearestKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int KeyRecognizer::findNearestKey </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>f</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the nearest key for a given frequency. </p>
<p>This function determines the most likely index of a key for a given frequency, referring to the actual concert pitch. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>: Frequency in Hz </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Index of the key in the range 0..mNumberOfKeys </dd></dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00471">471</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>

</div>
</div>
<a id="aee5d8c5201a36164195ed9b6ddbfc1a0" name="aee5d8c5201a36164195ed9b6ddbfc1a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee5d8c5201a36164195ed9b6ddbfc1a0">&#9670;&#160;</a></span>ftom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int KeyRecognizer::ftom </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>f</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map frequency to bin index. </p>
<p>Convert frequency to logspec index.</p>
<p>The key recognizer performs a logarithmic binning independent of the one carried out in the <a class="el" href="class_f_f_t_analyzer.html" title="Module performing the final analysis of the Fourier transform.">FFTAnalyzer</a>. To this end the frequency f is mapped to an integer index m. The formula reads: </p><p class="formulaDsp">
\[ m(f) = \left[M \frac{\ln(f-f_{min})}{\ln(f_{max}-f_{min})}\right], \]
</p>
<p> where M is the total number of bins. The expression is rounded to an integer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>: Frequency in Hz </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Integer index </dd></dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00271">271</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>

</div>
</div>
<a id="ace5be96a5697d134e9732bb229eb181d" name="ace5be96a5697d134e9732bb229eb181d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5be96a5697d134e9732bb229eb181d">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::init </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>optimize</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization of the <a class="el" href="class_key_recognizer.html" title="Module for fast recognition of the pressed key.">KeyRecognizer</a>. </p>
<p>This function defines the kernel and optimizes the plan for the FFT. Optimization will take a while to be finished. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optimize</td><td>: true if the FFT should be optimized </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00082">82</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_ace5be96a5697d134e9732bb229eb181d_cgraph.png" border="0" usemap="#aclass_key_recognizer_ace5be96a5697d134e9732bb229eb181d_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_ace5be96a5697d134e9732bb229eb181d_cgraph" id="aclass_key_recognizer_ace5be96a5697d134e9732bb229eb181d_cgraph">
<area shape="rect" title="Initialization of the KeyRecognizer." alt="" coords="5,117,152,143"/>
<area shape="rect" href="class_key_recognizer.html#ad051d7f6d70cf0960d317e2861598f43" title="Define the kernel vector for key recognition." alt="" coords="200,76,407,101"/>
<area shape="poly" title=" " alt="" coords="148,115,220,101,221,107,149,120"/>
<area shape="rect" href="class_f_f_t___implementation.html#aa0e3df11ed2aaac3ca9d41743828a091" title="Optimize plan for the forward transfomation." alt="" coords="225,138,381,178"/>
<area shape="poly" title=" " alt="" coords="152,136,212,144,211,149,152,142"/>
<area shape="rect" href="class_f_f_t___implementation.html#abedd9b477e9f25722566a753d4eaaeed" title="Foward FFT, mapping a real vector with size N to a complex one with size N/2+1." alt="" coords="457,55,613,95"/>
<area shape="poly" title=" " alt="" coords="407,80,443,78,444,83,407,85"/>
<area shape="rect" href="class_key_recognizer.html#aee5d8c5201a36164195ed9b6ddbfc1a0" title="Map frequency to bin index." alt="" coords="457,120,613,145"/>
<area shape="poly" title=" " alt="" coords="372,99,455,115,454,120,370,104"/>
<area shape="rect" href="class_key_recognizer.html#a5d64a7e75360ee497f157bd817579920" title=" " alt="" coords="455,5,616,31"/>
<area shape="poly" title=" " alt="" coords="345,73,479,32,480,37,347,78"/>
<area shape="rect" href="class_f_f_t___implementation.html#ae3cd5e779f634462731886c16886a27d" title="Construct a new plan for the FFT transformation if necessary." alt="" coords="665,109,821,149"/>
<area shape="poly" title=" " alt="" coords="614,93,652,103,651,108,613,98"/>
<area shape="rect" href="class_key_recognizer.html#a3faff2c2ae9f9cc81aca216f1345b772" title="Map bin index to frequency." alt="" coords="664,5,821,31"/>
<area shape="poly" title=" " alt="" coords="616,15,650,15,650,21,616,21"/>
<area shape="poly" title=" " alt="" coords="382,160,493,162,616,155,654,149,655,154,616,161,493,168,382,166"/>
</map>
</div>

</div>
</div>
<a id="a3faff2c2ae9f9cc81aca216f1345b772" name="a3faff2c2ae9f9cc81aca216f1345b772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3faff2c2ae9f9cc81aca216f1345b772">&#9670;&#160;</a></span>mtof()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double KeyRecognizer::mtof </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map bin index to frequency. </p>
<p>Convert logspec index to frequency.</p>
<p>This function maps the logarithmic binning index back to the frequency. It is the inverse function of ftom: </p><p class="formulaDsp">
\[ f(m) = f_{min} + (f_{max}-f_{min})^{m/M} \,. \]
</p>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>: the index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>frequency in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00289">289</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>

</div>
</div>
<a id="a64fbe75ad6c9205d1fbafaf6067ff4e8" name="a64fbe75ad6c9205d1fbafaf6067ff4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64fbe75ad6c9205d1fbafaf6067ff4e8">&#9670;&#160;</a></span>recognizeKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::recognizeKey </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>forceRestart</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_piano.html">Piano</a> *</td>          <td class="paramname"><span class="paramname"><em>piano</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fftadapter_8h.html#a594980415f64f924a9cf17fddb9a26cf">FFTDataPointer</a></td>          <td class="paramname"><span class="paramname"><em>fftPointer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>selectedKey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>keyForced</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start key recognition. </p>
<p>Function to start the key recognition thread. This function is called by the <a class="el" href="class_signal_analyzer.html" title="Signal analyzer: Fourier transformation of the recorded audio signal.">SignalAnalyzer</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forceRestart</td><td>: true if restart of the thread is forced </td></tr>
    <tr><td class="paramname">piano</td><td>: pointer to the piano data </td></tr>
    <tr><td class="paramname">fftPointer</td><td>: pointer to the actual FFT </td></tr>
    <tr><td class="paramname">selectedKey</td><td>: Number of the selected key (-1 if none) </td></tr>
    <tr><td class="paramname">keyForced</td><td>: Boolean flag saying whether the selected key is forced </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00111">111</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a64fbe75ad6c9205d1fbafaf6067ff4e8_cgraph.png" border="0" usemap="#aclass_key_recognizer_a64fbe75ad6c9205d1fbafaf6067ff4e8_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a64fbe75ad6c9205d1fbafaf6067ff4e8_cgraph" id="aclass_key_recognizer_a64fbe75ad6c9205d1fbafaf6067ff4e8_cgraph">
<area shape="rect" title="Start key recognition." alt="" coords="5,134,219,159"/>
<area shape="rect" href="class_simple_thread_handler.html#aa264337db95c2348e4396ccbce713ff8" title=" " alt="" coords="267,63,429,103"/>
<area shape="poly" title=" " alt="" coords="159,131,259,104,261,109,161,136"/>
<area shape="rect" href="class_simple_thread_handler.html#acd459deb405647c580000490aaa71a0d" title=" " alt="" coords="267,127,429,167"/>
<area shape="poly" title=" " alt="" coords="219,144,253,144,253,149,219,149"/>
<area shape="rect" href="class_simple_thread_handler.html#a9c7f6061a6b567b59ca9847180544d70" title=" " alt="" coords="483,184,646,224"/>
<area shape="poly" title=" " alt="" coords="167,157,267,176,372,188,470,196,470,202,371,194,266,181,166,162"/>
<area shape="rect" href="class_simple_thread_handler.html#ae3190fa086d45d5325bbffabf0be5097" title="Register a thread for termination." alt="" coords="700,184,863,224"/>
<area shape="poly" title=" " alt="" coords="430,147,536,155,652,169,696,178,695,183,652,175,535,160,429,153"/>
<area shape="rect" href="class_simple_thread_handler.html#a0832e65ca495778cf58dd039985fb69c" title=" " alt="" coords="477,69,652,109"/>
<area shape="poly" title=" " alt="" coords="423,124,475,110,476,115,425,129"/>
<area shape="poly" title=" " alt="" coords="425,164,476,178,475,183,423,169"/>
<area shape="rect" href="class_simple_thread_handler.html#a773070afe77138730078e87096784f1b" title=" " alt="" coords="700,69,863,109"/>
<area shape="poly" title=" " alt="" coords="652,87,686,87,686,92,652,92"/>
<area shape="rect" href="class_ept_exception.html#abce4d06a67b4e28198008f479ff574db" title="Override std::exception::what." alt="" coords="708,134,855,159"/>
<area shape="poly" title=" " alt="" coords="642,107,720,128,719,133,640,112"/>
<area shape="rect" href="class_simple_thread_handler.html#ac8e798b146647cf3fae4ca1e13c05e44" title="Virtual worker function, executed within the new thread." alt="" coords="700,5,863,45"/>
<area shape="poly" title=" " alt="" coords="632,67,700,47,701,52,634,72"/>
<area shape="poly" title=" " alt="" coords="646,201,686,201,686,207,646,207"/>
</map>
</div>

</div>
</div>
<a id="adcc7380f691a2b83e93a6e84aa38a70e" name="adcc7380f691a2b83e93a6e84aa38a70e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc7380f691a2b83e93a6e84aa38a70e">&#9670;&#160;</a></span>signalPreprocessing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::signalPreprocessing </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Preprocessing of the signal. </p>
<p>The purpose of this function is to convert the logarithmically binned spectrum (called logspec), which is logarithmic in the frequency, also logarithmically in the amplitude. The result is a double-logarithmic spectrum, i.e., logarithmic in its binning and also in its value. Values &lt;= 0 are mapped to zero.</p>
<p>Some spectra, in particular those of the high keys, show a broad noise background which varies only smoothly with the frequency. The second part of the function substracts a gliding average over a certain window, centereing the loglog spectrum around the zero line. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00335">335</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_adcc7380f691a2b83e93a6e84aa38a70e_cgraph.png" border="0" usemap="#aclass_key_recognizer_adcc7380f691a2b83e93a6e84aa38a70e_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_adcc7380f691a2b83e93a6e84aa38a70e_cgraph" id="aclass_key_recognizer_adcc7380f691a2b83e93a6e84aa38a70e_cgraph">
<area shape="rect" title="Preprocessing of the signal." alt="" coords="5,104,261,129"/>
<area shape="rect" href="namespace_math_tools.html#a8e5a71490a2b0d116956bcb8bcefae0f" title="Compute the norm of a vector." alt="" coords="327,5,517,31"/>
<area shape="poly" title=" " alt="" coords="159,102,226,71,308,39,338,31,339,36,310,45,228,76,161,106"/>
<area shape="rect" href="class_key_recognizer.html#aee5d8c5201a36164195ed9b6ddbfc1a0" title="Map frequency to bin index." alt="" coords="344,55,500,80"/>
<area shape="poly" title=" " alt="" coords="208,101,333,80,334,85,209,107"/>
<area shape="rect" href="class_piano.html#aae9866e7d27d8f35fc0524f57fbb5758" title="Function returning the equal temperament." alt="" coords="309,104,535,129"/>
<area shape="poly" title=" " alt="" coords="261,114,295,114,295,119,261,119"/>
<area shape="rect" href="namespace_math_tools.html#a84f6eb75e82878db8bb0c3b57ab0bcfe" title="Map a vector to a different one by a unary map." alt="" coords="321,153,523,179"/>
<area shape="poly" title=" " alt="" coords="209,127,334,148,333,154,208,132"/>
<area shape="rect" href="class_key_recognizer.html#a5d64a7e75360ee497f157bd817579920" title=" " alt="" coords="341,203,503,228"/>
<area shape="poly" title=" " alt="" coords="162,127,229,157,310,187,344,197,342,202,309,193,227,162,160,132"/>
<area shape="rect" href="class_keyboard.html#a6920a5de40fff9a2014f03f8a5bb6e14" title=" " alt="" coords="583,80,803,105"/>
<area shape="poly" title=" " alt="" coords="535,104,569,101,569,106,535,109"/>
<area shape="rect" href="class_keyboard.html#a49ed6c8f56a37881d49a3a16e01d1daa" title=" " alt="" coords="587,129,798,155"/>
<area shape="poly" title=" " alt="" coords="535,125,574,128,574,134,535,130"/>
<area shape="rect" href="class_key_recognizer.html#a3faff2c2ae9f9cc81aca216f1345b772" title="Map bin index to frequency." alt="" coords="614,203,771,228"/>
<area shape="poly" title=" " alt="" coords="503,213,600,213,600,218,503,218"/>
</map>
</div>

</div>
</div>
<a id="a8eb84f9562650da30230fb42fee17ac6" name="a8eb84f9562650da30230fb42fee17ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eb84f9562650da30230fb42fee17ac6">&#9670;&#160;</a></span>workerFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::workerFunction </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main worker function for executing the key recognition thread. </p>

<p>Implements <a class="el" href="class_simple_thread_handler.html#ac8e798b146647cf3fae4ca1e13c05e44">SimpleThreadHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00146">146</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a8eb84f9562650da30230fb42fee17ac6_cgraph.png" border="0" usemap="#aclass_key_recognizer_a8eb84f9562650da30230fb42fee17ac6_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a8eb84f9562650da30230fb42fee17ac6_cgraph" id="aclass_key_recognizer_a8eb84f9562650da30230fb42fee17ac6_cgraph">
<area shape="rect" title="Main worker function for executing the key recognition thread." alt="" coords="5,325,231,350"/>
<area shape="rect" href="class_key_recognizer.html#a4d3eac12f6777469a48d2c98ddfb2ed6" title="Construct logarithmic spectrum." alt="" coords="313,81,500,121"/>
<area shape="poly" title=" " alt="" coords="124,323,145,287,179,237,224,184,277,138,301,124,304,129,280,142,227,187,183,240,149,290,128,326"/>
<area shape="rect" href="class_key_recognizer.html#a83d4472824709f6613d09bb8dc77677e" title="Detect forced key." alt="" coords="301,152,512,192"/>
<area shape="poly" title=" " alt="" coords="140,322,358,197,360,201,143,327"/>
<area shape="rect" href="class_key_recognizer.html#a4be4d239b340713b5bf54457d89bd778" title="Detect keys in the treble." alt="" coords="289,5,524,45"/>
<area shape="poly" title=" " alt="" coords="121,324,138,276,170,207,216,133,245,98,277,67,307,49,309,53,280,71,249,101,221,136,175,210,143,278,126,325"/>
<area shape="rect" href="class_key_recognizer.html#a0c010e16576e21b3c3b6b719d5e7f0fb" title="Estimate frequency for a given log&#45;log spectrum." alt="" coords="281,299,532,325"/>
<area shape="poly" title=" " alt="" coords="230,325,267,322,268,327,231,330"/>
<area shape="rect" href="class_key_recognizer.html#af0eba901db51587986d4b3d255135464" title="Find the nearest key for a given frequency." alt="" coords="294,398,519,423"/>
<area shape="poly" title=" " alt="" coords="157,348,279,384,318,393,317,398,278,389,156,353"/>
<area shape="rect" href="class_key_recognizer_callback.html#ab0e1f02f49c08dc7b456438d176edb09" title=" " alt="" coords="319,448,494,488"/>
<area shape="poly" title=" " alt="" coords="138,348,198,390,238,413,280,434,307,444,305,449,278,438,236,418,196,394,135,352"/>
<area shape="rect" href="class_simple_thread_handler.html#a2b9a9567f74a046f9a76ff974ca3fa5e" title=" " alt="" coords="325,512,488,552"/>
<area shape="poly" title=" " alt="" coords="130,349,187,420,231,462,280,498,313,512,311,517,277,502,227,466,183,424,126,352"/>
<area shape="rect" href="class_key_recognizer.html#adcc7380f691a2b83e93a6e84aa38a70e" title="Preprocessing of the signal." alt="" coords="279,349,535,374"/>
<area shape="poly" title=" " alt="" coords="231,344,265,347,265,352,231,349"/>
<area shape="rect" href="namespace_math_tools.html#a1fe78450a9646eab1fd4e9400cf79be8" title=" " alt="" coords="583,58,819,83"/>
<area shape="poly" title=" " alt="" coords="500,89,569,82,569,87,500,94"/>
<area shape="rect" href="namespace_math_tools.html#a7c9a732488d87f78d2b0cc78f3e047f5" title="Round a floating point number to an integer." alt="" coords="880,58,1073,83"/>
<area shape="poly" title=" " alt="" coords="819,68,866,68,866,73,819,73"/>
<area shape="poly" title=" " alt="" coords="512,151,891,83,892,88,513,156"/>
<area shape="rect" href="class_piano.html#aae9866e7d27d8f35fc0524f57fbb5758" title="Function returning the equal temperament." alt="" coords="588,159,813,185"/>
<area shape="poly" title=" " alt="" coords="512,169,574,169,574,175,512,175"/>
<area shape="rect" href="class_keyboard.html#a6920a5de40fff9a2014f03f8a5bb6e14" title=" " alt="" coords="867,159,1087,185"/>
<area shape="poly" title=" " alt="" coords="814,169,853,169,853,175,814,175"/>
<area shape="rect" href="class_keyboard.html#a49ed6c8f56a37881d49a3a16e01d1daa" title=" " alt="" coords="871,110,1082,135"/>
<area shape="poly" title=" " alt="" coords="772,157,891,135,892,140,773,162"/>
<area shape="poly" title=" " alt="" coords="524,25,665,31,819,43,895,53,894,58,818,48,665,36,524,30"/>
<area shape="rect" href="class_f_f_t___implementation.html#abedd9b477e9f25722566a753d4eaaeed" title="Foward FFT, mapping a real vector with size N to a complex one with size N/2+1." alt="" coords="623,209,779,249"/>
<area shape="poly" title=" " alt="" coords="452,297,614,251,616,256,454,302"/>
<area shape="rect" href="namespace_math_tools.html#a245ada2fb161d9992f7a139bbc6f9364" title="Find the component where the vector has its maximum." alt="" coords="607,274,794,299"/>
<area shape="poly" title=" " alt="" coords="532,299,593,293,594,299,533,304"/>
<area shape="rect" href="class_key_recognizer.html#a3faff2c2ae9f9cc81aca216f1345b772" title="Map bin index to frequency." alt="" coords="898,350,1055,375"/>
<area shape="poly" title=" " alt="" coords="532,320,884,352,884,357,532,326"/>
<area shape="rect" href="class_key_recognizer.html#a5d64a7e75360ee497f157bd817579920" title=" " alt="" coords="620,375,781,401"/>
<area shape="poly" title=" " alt="" coords="483,322,535,335,584,353,636,369,635,374,582,359,534,340,482,327"/>
<area shape="rect" href="class_f_f_t___implementation.html#ae3cd5e779f634462731886c16886a27d" title="Construct a new plan for the FFT transformation if necessary." alt="" coords="899,209,1055,249"/>
<area shape="poly" title=" " alt="" coords="779,227,885,227,885,232,779,232"/>
<area shape="poly" title=" " alt="" coords="781,378,884,368,884,374,782,383"/>
<area shape="poly" title=" " alt="" coords="517,346,533,335,547,319,554,303,556,267,559,231,566,213,581,195,588,189,592,194,585,199,571,216,564,232,562,268,559,304,551,322,536,339,519,351"/>
<area shape="poly" title=" " alt="" coords="535,370,606,377,606,382,535,376"/>
<area shape="rect" href="namespace_math_tools.html#a8e5a71490a2b0d116956bcb8bcefae0f" title="Compute the norm of a vector." alt="" coords="606,523,795,549"/>
<area shape="poly" title=" " alt="" coords="516,372,536,385,550,400,558,416,561,449,565,481,572,496,584,510,595,518,592,522,581,514,567,499,560,482,556,450,552,418,546,403,533,389,513,376"/>
<area shape="rect" href="class_key_recognizer.html#aee5d8c5201a36164195ed9b6ddbfc1a0" title="Map frequency to bin index." alt="" coords="623,425,779,450"/>
<area shape="poly" title=" " alt="" coords="492,371,536,384,560,398,584,411,610,419,608,424,582,416,557,402,534,389,490,377"/>
<area shape="rect" href="namespace_math_tools.html#a84f6eb75e82878db8bb0c3b57ab0bcfe" title="Map a vector to a different one by a unary map." alt="" coords="600,474,801,499"/>
<area shape="poly" title=" " alt="" coords="512,372,536,385,554,404,561,424,568,443,584,461,593,466,590,470,581,465,564,446,556,426,549,406,533,389,509,377"/>
</map>
</div>

</div>
</div>
<a id="a5d64a7e75360ee497f157bd817579920" name="a5d64a7e75360ee497f157bd817579920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d64a7e75360ee497f157bd817579920">&#9670;&#160;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void KeyRecognizer::Write </td>
          <td>(</td>
          <td class="paramtype">std::string</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>v</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>log</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8cpp_source.html#l00488">488</a> of file <a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a>.</p>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_key_recognizer_a5d64a7e75360ee497f157bd817579920_cgraph.png" border="0" usemap="#aclass_key_recognizer_a5d64a7e75360ee497f157bd817579920_cgraph" alt=""/></div>
<map name="aclass_key_recognizer_a5d64a7e75360ee497f157bd817579920_cgraph" id="aclass_key_recognizer_a5d64a7e75360ee497f157bd817579920_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,167,31"/>
<area shape="rect" href="class_key_recognizer.html#a3faff2c2ae9f9cc81aca216f1345b772" title="Map bin index to frequency." alt="" coords="215,5,372,31"/>
<area shape="poly" title=" " alt="" coords="167,15,201,15,201,21,167,21"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aeaebe5ecf81c4d19237a9f0b77401d13" name="aeaebe5ecf81c4d19237a9f0b77401d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaebe5ecf81c4d19237a9f0b77401d13">&#9670;&#160;</a></span>fmax</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double KeyRecognizer::fmax = 10000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frequency of bin M-1. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00063">63</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a18644f7aecec4213489222c015fef905" name="a18644f7aecec4213489222c015fef905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18644f7aecec4213489222c015fef905">&#9670;&#160;</a></span>fmin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double KeyRecognizer::fmin = 20</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frequency of bin 0. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00062">62</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a63af605a2fa3b4252b091cfc2fb01a8e" name="a63af605a2fa3b4252b091cfc2fb01a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63af605a2fa3b4252b091cfc2fb01a8e">&#9670;&#160;</a></span>logfmax</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double KeyRecognizer::logfmax = log(<a class="el" href="#aeaebe5ecf81c4d19237a9f0b77401d13">fmax</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log of maximal frequency. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00104">104</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="aa6a4cafaccbebbeac3ea1d648fc39396" name="aa6a4cafaccbebbeac3ea1d648fc39396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a4cafaccbebbeac3ea1d648fc39396">&#9670;&#160;</a></span>logfmin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double KeyRecognizer::logfmin = log(<a class="el" href="#a18644f7aecec4213489222c015fef905">fmin</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log of minimal frequency. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00103">103</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="afaa8624e0ee7ca7ca9d00602d85ba428" name="afaa8624e0ee7ca7ca9d00602d85ba428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaa8624e0ee7ca7ca9d00602d85ba428">&#9670;&#160;</a></span>M</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int KeyRecognizer::M = 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of bins (powers of 2,3,5) </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00061">61</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="afda7253ad5388e824a3c94e0e981ed41" name="afda7253ad5388e824a3c94e0e981ed41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afda7253ad5388e824a3c94e0e981ed41">&#9670;&#160;</a></span>mCallback</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_key_recognizer_callback.html">KeyRecognizerCallback</a>* KeyRecognizer::mCallback</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the caller. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00087">87</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a36489a01dabbbb046253ed353b4b44d1" name="a36489a01dabbbb046253ed353b4b44d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36489a01dabbbb046253ed353b4b44d1">&#9670;&#160;</a></span>mConcertPitch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double KeyRecognizer::mConcertPitch</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Actual frequency of the A-key. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00089">89</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="af179974811d35ecce1c818fc371d084a" name="af179974811d35ecce1c818fc371d084a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af179974811d35ecce1c818fc371d084a">&#9670;&#160;</a></span>mConvolution</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fftadapter_8h.html#aa6e69f745dd8b48e58e43fe16e08faf4">FFTRealVector</a> KeyRecognizer::mConvolution</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convolution vector. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00098">98</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a18888e2ecd2d97b1d13eaed283d69bfe" name="a18888e2ecd2d97b1d13eaed283d69bfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18888e2ecd2d97b1d13eaed283d69bfe">&#9670;&#160;</a></span>mFFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_f_t___implementation.html">FFT_Implementation</a> KeyRecognizer::mFFT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Instance of FFT implementation. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00093">93</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="ac57b2c7313010aed2a36ee9bdfa4c6fe" name="ac57b2c7313010aed2a36ee9bdfa4c6fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac57b2c7313010aed2a36ee9bdfa4c6fe">&#9670;&#160;</a></span>mFFTPtr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fftadapter_8h.html#a594980415f64f924a9cf17fddb9a26cf">FFTDataPointer</a> KeyRecognizer::mFFTPtr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to Fourier transform. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00088">88</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a62d40c584410834ffc8d19b98c71589a" name="a62d40c584410834ffc8d19b98c71589a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62d40c584410834ffc8d19b98c71589a">&#9670;&#160;</a></span>mFlatFFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fftadapter_8h.html#a2a94d0acf35b74fab627df026f02daf4">FFTComplexVector</a> KeyRecognizer::mFlatFFT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fourier transform of LogLogSpec. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00097">97</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="ae0078ef34c47a238c687877cf3be6af5" name="ae0078ef34c47a238c687877cf3be6af5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0078ef34c47a238c687877cf3be6af5">&#9670;&#160;</a></span>mFlatSpectrum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; KeyRecognizer::mFlatSpectrum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>DoubleLogarithmic spectrum (LogLogSpec) </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00095">95</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="aff558209e0f528fa9f08b6579134f90f" name="aff558209e0f528fa9f08b6579134f90f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff558209e0f528fa9f08b6579134f90f">&#9670;&#160;</a></span>mKernelFFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fftadapter_8h.html#a2a94d0acf35b74fab627df026f02daf4">FFTComplexVector</a> KeyRecognizer::mKernelFFT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fourier transform of the kernel. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00096">96</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a4f9e3b3e5f7447e58b5b24e60bf65486" name="a4f9e3b3e5f7447e58b5b24e60bf65486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f9e3b3e5f7447e58b5b24e60bf65486">&#9670;&#160;</a></span>mKeyForced</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool KeyRecognizer::mKeyForced</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating that the key is forced. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00100">100</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a435a974bad2aed884572ce63a914a3d1" name="a435a974bad2aed884572ce63a914a3d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a435a974bad2aed884572ce63a914a3d1">&#9670;&#160;</a></span>mKeyNumberOfA</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int KeyRecognizer::mKeyNumberOfA</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of the A-key. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00092">92</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a2006e4b41de73553e53f59f94faafdbc" name="a2006e4b41de73553e53f59f94faafdbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2006e4b41de73553e53f59f94faafdbc">&#9670;&#160;</a></span>mLogSpec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; KeyRecognizer::mLogSpec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logarithmic spectrum (LogSpec) </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00094">94</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a68b3f2f061b9638d84f51f587a989523" name="a68b3f2f061b9638d84f51f587a989523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68b3f2f061b9638d84f51f587a989523">&#9670;&#160;</a></span>mNumberOfKeys</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int KeyRecognizer::mNumberOfKeys</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of piano keys. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00091">91</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="a321cebc408f13caad794284ccf2fd56e" name="a321cebc408f13caad794284ccf2fd56e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a321cebc408f13caad794284ccf2fd56e">&#9670;&#160;</a></span>mPiano</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_piano.html">Piano</a>* KeyRecognizer::mPiano</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the piano data. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00090">90</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<a id="ae8498e6102fa0225801cc56274ced9f3" name="ae8498e6102fa0225801cc56274ced9f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8498e6102fa0225801cc56274ced9f3">&#9670;&#160;</a></span>mSelectedKey</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int KeyRecognizer::mSelectedKey</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of the actually selected key. </p>

<p class="definition">Definition at line <a class="el" href="keyrecognizer_8h_source.html#l00099">99</a> of file <a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/common/core/analyzers/<a class="el" href="keyrecognizer_8h_source.html">keyrecognizer.h</a></li>
<li>src/common/core/analyzers/<a class="el" href="keyrecognizer_8cpp_source.html">keyrecognizer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_key_recognizer.html">KeyRecognizer</a></li>
    <li class="footer">Generated on Wed Sep 11 2024 07:44:56 for Entropy Piano Tuner by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
